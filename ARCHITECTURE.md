# Soil Health Dashboard - Architecture Overview

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React/TypeScript)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ SoilHealthCard   â”‚  â”‚   RealtimeMonitorâ”‚  â”‚ParameterComparison
â”‚  â”‚   (Dashboard)    â”‚  â”‚  (Live Updates)  â”‚  â”‚  (Visual Analysis)â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚           â”‚                      â”‚                      â”‚                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                  â”‚                                       â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                    â”‚ soilHealthService.ts       â”‚                       â”‚
â”‚                    â”‚ (TypeScript API Client)    â”‚                       â”‚
â”‚                    â”‚ - Type-safe requests       â”‚                       â”‚
â”‚                    â”‚ - Error handling           â”‚                       â”‚
â”‚                    â”‚ - Helper methods           â”‚                       â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                  â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚ HTTP/REST
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   CORS Configuration       â”‚
                    â”‚   (Flask-CORS)             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND API SERVER (Flask)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                    app.py (Flask Server)                      â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚  â”‚              API Routes & Endpoints                    â”‚ â”‚      â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  1. POST /soil-health/analyze                        â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  2. POST /soil-health/health-index                   â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  3. POST /soil-health/anomaly                        â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  4. POST /soil-health/critical-factors               â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  5. GET  /soil-health/optimal-ranges                â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  6. POST /soil-health/batch-analyze                 â”‚ â”‚      â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â”‚                       â”‚                                   â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚  â”‚     Request Validation & Error Handling             â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  - Field validation                                 â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  - Type checking                                    â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  - Error responses                                  â”‚ â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â”‚                       â”‚                                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                          â”‚                                           â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚           â”‚ ML Engine (soil_health_ml)   â”‚                           â”‚
â”‚           â”‚                              â”‚                           â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚           â”‚  â”‚  Random Forest Classifierâ”‚                           â”‚
â”‚           â”‚  â”‚  (Health Index Scoring)  â”‚                           â”‚
â”‚           â”‚  â”‚  - 100 estimators        â”‚                           â”‚
â”‚           â”‚  â”‚  - 7 features            â”‚                           â”‚
â”‚           â”‚  â”‚  - Probability output    â”‚                           â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚           â”‚             â”‚                                           â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚           â”‚  â”‚ Isolation Forest         â”‚                           â”‚
â”‚           â”‚  â”‚ (Anomaly Detection)      â”‚                           â”‚
â”‚           â”‚  â”‚ - 100 estimators         â”‚                           â”‚
â”‚           â”‚  â”‚ - 5% contamination       â”‚                           â”‚
â”‚           â”‚  â”‚ - Severity scoring       â”‚                           â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚           â”‚             â”‚                                           â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚           â”‚  â”‚ Feature Scaler            â”‚                           â”‚
â”‚           â”‚  â”‚ (StandardScaler)          â”‚                           â”‚
â”‚           â”‚  â”‚ - Normalization           â”‚                           â”‚
â”‚           â”‚  â”‚ - Inverse transform       â”‚                           â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚           â”‚             â”‚                                           â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚           â”‚  â”‚ Critical Factor Analysis  â”‚                           â”‚
â”‚           â”‚  â”‚ - Parameter deviation     â”‚                           â”‚
â”‚           â”‚  â”‚ - Optimal range checking  â”‚                           â”‚
â”‚           â”‚  â”‚ - Recommendations         â”‚                           â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                          â”‚                                           â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚           â”‚  Monitoring & Logging       â”‚                           â”‚
â”‚           â”‚  - Performance tracking     â”‚                           â”‚
â”‚           â”‚  - Error logging            â”‚                           â”‚
â”‚           â”‚  - Health checks            â”‚                           â”‚
â”‚           â”‚  - Alert management         â”‚                           â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚        DATA & MODELS LAYER          â”‚
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                â”‚                                      â”‚
                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                â”‚  â”‚    data/data.csv               â”‚ â”‚
                â”‚  â”‚  (Training Dataset)            â”‚ â”‚
                â”‚  â”‚  - 2,880 records               â”‚ â”‚
                â”‚  â”‚  - 1 month data                â”‚ â”‚
                â”‚  â”‚  - 30-min intervals            â”‚ â”‚
                â”‚  â”‚  - 7 parameters                â”‚ â”‚
                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                â”‚               â”‚                     â”‚
                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                â”‚  â”‚    models/ Directory           â”‚ â”‚
                â”‚  â”‚  (Trained ML Models)           â”‚ â”‚
                â”‚  â”‚  - health_model.pkl            â”‚ â”‚
                â”‚  â”‚  - anomaly_model.pkl           â”‚ â”‚
                â”‚  â”‚  - scaler.pkl                  â”‚ â”‚
                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                â”‚                                      â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IoT Sensors  â”‚  (Real-world measurements)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 30-min intervals
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend Application     â”‚  (React Component)
â”‚ - SoilHealthCard         â”‚
â”‚ - RealtimeMonitor        â”‚
â”‚ - ParameterComparison    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ POST /analyze
       â”‚ {N, P, K, CO2, Temp, Moisture, pH}
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend API Server (Flask)                               â”‚
â”‚ - Input validation                                       â”‚
â”‚ - Request routing                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ML Processing Pipeline                                   â”‚
â”‚                                                          â”‚
â”‚  1. Feature Scaling (StandardScaler)                    â”‚
â”‚  2. Random Forest Prediction (Health Index)             â”‚
â”‚  3. Isolation Forest Prediction (Anomaly)               â”‚
â”‚  4. Critical Factor Identification                      â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Analysis Results                                         â”‚
â”‚ - Health Index (1-100)                                  â”‚
â”‚ - Health Status (Excellent/Good/Fair/Poor/Critical)     â”‚
â”‚ - Anomaly Detection (True/False)                        â”‚
â”‚ - Anomaly Score (0.0-1.0)                               â”‚
â”‚ - Critical Factors (List)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Response to Frontend (JSON)                              â”‚
â”‚ {                                                        â”‚
â”‚   "timestamp": "2024-11-01T12:30:00",                  â”‚
â”‚   "soil_health_index": 78,                              â”‚
â”‚   "health_status": "Good",                              â”‚
â”‚   "is_anomalous": false,                                â”‚
â”‚   "anomaly_score": 0.15,                                â”‚
â”‚   "critical_factors": []                                â”‚
â”‚ }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend Display                                         â”‚
â”‚ - Health gauge visualization                            â”‚
â”‚ - Status color coding                                   â”‚
â”‚ - Alerts & notifications                                â”‚
â”‚ - Parameter analysis                                    â”‚
â”‚ - Historical trends                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Dependency Tree

```
App.tsx (Root)
â”‚
â”œâ”€â”€ SoilHealthReport.tsx (Main Page)
â”‚   â”‚
â”‚   â”œâ”€â”€ SoilHealthCard
â”‚   â”‚   â””â”€â”€ soilHealthService.ts
â”‚   â”‚       â”œâ”€â”€ fetch() API
â”‚   â”‚       â”œâ”€â”€ Type definitions
â”‚   â”‚       â””â”€â”€ Helper methods
â”‚   â”‚
â”‚   â”œâ”€â”€ RealtimeSensorMonitor
â”‚   â”‚   â”œâ”€â”€ setInterval (30 min)
â”‚   â”‚   â””â”€â”€ soilHealthService.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ParameterComparison
â”‚   â”‚   â””â”€â”€ soilHealthService.ts
â”‚   â”‚       â””â”€â”€ getOptimalRanges()
â”‚   â”‚
â”‚   â”œâ”€â”€ HistoricalAnalysis
â”‚   â”‚   â””â”€â”€ soilHealthService.ts
â”‚   â”‚       â””â”€â”€ batchAnalyze()
â”‚   â”‚
â”‚   â””â”€â”€ AlertSystem
â”‚       â””â”€â”€ soilHealthService.ts
â”‚           â””â”€â”€ analyzeSoil()
â”‚
â””â”€â”€ Other Pages
    â””â”€â”€ (Hardware, Crops, Subsidies, etc.)
```

## Deployment Architecture

### Development Environment
```
Local Machine
â”œâ”€â”€ Frontend (http://localhost:3000 or 5173)
â”œâ”€â”€ Backend API (http://localhost:5000)
â””â”€â”€ Data Files (./backend/data, ./backend/models)
```

### Docker Environment
```
Docker Host
â”œâ”€â”€ Container: soil-health-api
â”‚   â”œâ”€â”€ Port: 5000
â”‚   â”œâ”€â”€ Volumes: /app/models, /app/logs
â”‚   â””â”€â”€ Network: soil-health-network
â”‚
â””â”€â”€ Frontend (Separate deployment)
    â”œâ”€â”€ Port: 80 or 443
    â””â”€â”€ VITE_API_URL: http://soil-health-api:5000/api
```

### Production Environment
```
Production Server(s)
â”œâ”€â”€ Load Balancer
â”‚   â”œâ”€â”€ API Servers (Replicas)
â”‚   â”‚   â”œâ”€â”€ soil-health-api-1:5000
â”‚   â”‚   â”œâ”€â”€ soil-health-api-2:5000
â”‚   â”‚   â””â”€â”€ soil-health-api-n:5000
â”‚   â”‚
â”‚   â””â”€â”€ Frontend CDN
â”‚       â”œâ”€â”€ Static assets
â”‚       â””â”€â”€ API requests (forwarded)
â”‚
â””â”€â”€ Monitoring Stack
    â”œâ”€â”€ Prometheus (Metrics)
    â”œâ”€â”€ Grafana (Dashboards)
    â””â”€â”€ ELK Stack (Logs)
```

## ML Model Architecture

```
Input Layer (7 features)
    N, P, K, CO2, Temperature, Moisture, pH
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ StandardScaler   â”‚  (Feature Normalization)
  â”‚ fit_transform()  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Random Forest      â”‚  (Health Scoring)
    â”‚ - 100 trees        â”‚
    â”‚ - max_depth: 10    â”‚
    â”‚ - random_state: 42 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    Probability Prediction
    (Health = Prob Ã— 100)
         â”‚
         â–¼
    Health Index Output
    (1-100 scale)
         â”‚
         â–¼
    Status Classification
    (Excellent/Good/Fair/Poor/Critical)

Parallel Path:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Isolation Forest â”‚  (Anomaly Detection)
    â”‚ - 100 trees      â”‚
    â”‚ - contamination: 0.05 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    Anomaly Prediction (-1 or 1)
         â”‚
         â–¼
    Anomaly Score Calculation
    Severity Classification
    (Low/Medium/High)
```

## Integration Timeline

```
Week 1: Setup
â”œâ”€â”€ Install dependencies
â”œâ”€â”€ Train ML models
â””â”€â”€ Start API server

Week 2: Frontend Integration
â”œâ”€â”€ Add API client service
â”œâ”€â”€ Create React components
â””â”€â”€ Test endpoints

Week 3: Testing & QA
â”œâ”€â”€ Unit tests
â”œâ”€â”€ Integration tests
â””â”€â”€ Performance testing

Week 4: Deployment
â”œâ”€â”€ Docker build
â”œâ”€â”€ Production config
â””â”€â”€ Go live!
```

## Health Index Scoring Breakdown

```
Raw Sensor Reading
    â”‚
    â”œâ”€ Nitrogen â†’ [10-40] range
    â”œâ”€ Phosphorus â†’ [5-35] range
    â”œâ”€ Potassium â†’ [50-300] range
    â”œâ”€ CO2 â†’ [300-800] range
    â”œâ”€ Temperature â†’ [10-30]Â°C range
    â”œâ”€ Moisture â†’ [30-70]% range
    â””â”€ pH â†’ [6.0-8.0] range
    â”‚
    â–¼
Optimal Range Scoring
    â”‚
    â”œâ”€ Each parameter: 0-100% within range
    â”‚
    â–¼
Random Forest Classifier
    â”‚
    â”œâ”€ Healthy vs Unhealthy classification
    â”œâ”€ Probability calculation
    â”‚
    â–¼
Final Health Index (1-100)
    â”‚
    â”œâ”€ 75-100: Excellent âœ…
    â”œâ”€ 60-74:  Good âœ…
    â”œâ”€ 45-59:  Fair âš ï¸
    â”œâ”€ 30-44:  Poor âŒ
    â””â”€ 1-29:   Critical ğŸš¨
```

---

This architecture ensures:
âœ… Scalability - Easy to add more sensors/farms
âœ… Maintainability - Clear separation of concerns
âœ… Performance - Optimized ML models
âœ… Reliability - Error handling & logging
âœ… Extensibility - Easy to add new features
